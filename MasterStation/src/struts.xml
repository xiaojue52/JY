<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 2.1//EN" "http://struts.apache.org/dtds/struts-2.1.dtd">
<struts>
 <package name="abstract_struts" abstract="true"
  extends="struts-default" namespace="/">
  <interceptors>
   <interceptor-stack name="myStack">
    <interceptor-ref name="defaultStack"></interceptor-ref>
    <interceptor-ref name="auth"></interceptor-ref>
   </interceptor-stack>
   <interceptor name="auth" class="com.station.interceptor.UserLoginInterceptor" />
  </interceptors>
  <default-interceptor-ref name="myStack" />
  <global-results>
   <result name="login">/index.jsp</result>
  </global-results>
 </package>
 <package name="Root" extends="abstract_struts" namespace="/">
  <action name="login" class="loginAction" method="login">
   <result name="success" type="redirect">/main.jsp</result>
   <result name="failure" type="redirect">/index.jsp</result>
  </action>
  <action name="logout" class="logoutAction" method="logout">
   <result name="success" type="redirect">/index.jsp</result>
  </action>
  <action name="listUsers" class="listUsersAction">
   <result name="success">/account/user_list.jsp</result>
  </action>
  <action name="updateUser" class="updateUserAction" method="updateUser">
   <result name="users" type="redirect">/listUsers.action</result>
  </action>
  <action name="updatePassword" class="updateUserAction" method="updatePassword">
   <result name="account" type="redirect">/logout.action</result>
   <result name="passworderror">/account/account.jsp</result>
  </action>
  <action name="deleteUser" class="deleteUserAction">
   <result name="success" type="redirect">/listUsers.action</result>
  </action>
  <action name="showUser" class="showUserAction" method="showUserAction">
   <result name="json"></result>
  </action>
  <action name="addUser" class="addUserAction">
   <result name="success" type="redirect">/listUsers.action</result>
   <result name="error" type="redirect">/listUsers.action?errorCode=-1</result>
  </action>
  </package>

<package name="Device" extends="abstract_struts" namespace="/">
  <action name="listDevices" class="listDevicesAction">
   <result name="success">/device/devicelist.jsp</result>
  </action>
  <action name="showDevice" class="showDeviceRecordAction">
   <result name="success">/device/deviceDetails.jsp</result>
  </action>
  <action name="updateDevice" class="updateDeviceAction">
   <result name="success" type="redirect">/listDevices.action</result>
  </action>
</package>
<package name="Main" extends="abstract_struts" namespace="/">
  <action name="mainAction" class="MainAction" method="getCurrent">
   <result name="success">/monitor/monitor.jsp</result>
  </action>
  <action name="getDataByTime" class="MainAction" method="getDataByTime">
   <result name="success">/monitor/main.jsp</result>
  </action>
</package>

<package name="Exception" extends="abstract_struts" namespace="/">
<action name="unhandledException" class="UnhandledExceptionAction">
   <result name="success">/exception/unhandledexception.jsp</result>
  </action>
  <action name="deleteUnhandledException" class="DeleteUnhandledExceptionAction">
   <result name="success" type="redirect">unhandledException.action</result>
  </action>
</package>

<package name="History" extends="abstract_struts" namespace="/">
<action name="listHistory" class="ListHistoryAction" method="listHistory">
   <result name="success">/history/history.jsp</result>
  </action>
  <action name="listExceptionHistory" class="ListHistoryAction" method="listExceptionHistory">
   <result name="success">/history/exceptionhistory.jsp</result>
  </action>
</package>

<package name="Trees" extends="abstract_struts" namespace="/"> 
	<action name="createTree" class="CreateTreeAction" method="getTreeData"> 
 	</action> 
 </package> 
<package name="json" extends="abstract_struts" namespace="/">
	<action name="showCabinetRecord" class="CabinetAction" method="showCabinetRecord"> 
 		<result name="json"></result>
 	</action>
 	<action name="showDeviceRecord" class="DeviceAction" method="showDeviceRecord"> 
 		<result name="json"></result>
 	</action>
 	<action name="showDetectorRecord" class="DetectorAction" method="showDetectorRecord"> 
 		<result name="json"></result>
 	</action>
 	
 	<action name="addLine" class="LineAction" method="addLineAction"> 
 		<result name="success">/system/system_tree.jsp</result>
 	</action>
 	<action name="addCabinet" class="CabinetAction" method="addCabinetAction"> 
 		<result name="success">/system/system_tree.jsp</result>
 	</action>
 	<action name="addDevice" class="DeviceAction" method="addDeviceAction"> 
 		<result name="success">/system/system_tree.jsp</result>
 	</action>
 	
 	<action name="updateCabinet" class="CabinetAction" method="updateCabinetAction"> 
 		<result name="success">/system/system_tree.jsp</result>
 	</action>
 	<action name="updateDevice" class="DeviceAction" method="updateDeviceAction"> 
 		<result name="success">/system/system_tree.jsp</result>
 	</action>
</package>

<!--include file="struts-jfreechart.xml"></include-->
</struts>   
